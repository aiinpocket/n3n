# N3N Flow Platform

[English](README.en.md) | 日本語 | [繁體中文](README.md)

> 言葉で説明するだけで自動化ワークフローを作成 - AIがあなたのアイデアを実行可能なワークフローに変換

---

## ハードウェア要件

N3Nには複数のサービスが組み込まれています。使用状況に応じて適切なハードウェアを選択してください：

### 最低要件（基本動作）

| 項目 | スペック |
|------|---------|
| **CPU** | 2コア |
| **メモリ** | 4 GB |
| **ディスク** | 10 GB SSD |
| **OS** | Windows 10/11、macOS 12+、Ubuntu 20.04+ |

> 対象：個人利用、シンプルなフロー、AI機能なし

### 推奨要件（クラウドAI利用）

| 項目 | スペック |
|------|---------|
| **CPU** | 4コア |
| **メモリ** | 8 GB |
| **ディスク** | 20 GB SSD |
| **ネットワーク** | 安定したインターネット接続 |

> 対象：日常利用、中程度の複雑さのフロー、OpenAI/Claude/GeminiなどクラウドAIの利用

### 上級要件（ローカルAIオプティマイザー）

| 項目 | スペック |
|------|---------|
| **CPU** | 8コア以上 |
| **メモリ** | 16 GB以上（32 GB推奨）|
| **ディスク** | 50 GB SSD |
| **GPU** | オプション：NVIDIA GPU 8GB+ VRAM（推論高速化） |

> 対象：ローカルAIフローオプティマイザー、高負荷・並列フロー、エンタープライズデプロイ

### 組み込みサービスのリソース使用量

| サービス | メモリ | 説明 |
|---------|--------|------|
| **N3N App** | ~512 MB | Spring Bootアプリケーション |
| **PostgreSQL** | ~256 MB | リレーショナルデータベース |
| **Redis** | ~128 MB | キャッシュと実行状態 |
| **Flow Optimizer** | ~2-4 GB | ローカルLLM（オプション） |

---

## これは何ですか？

N3Nは**ビジュアルワークフロー自動化プラットフォーム**です：

- **自然言語で説明**するだけで、AIアシスタントがワークフローを生成
- **ドラッグ＆ドロップ**でフローチャートを調整、コーディング不要
- **外部サービス**（API、データベースなど）に接続して日常業務を自動化

**プログラミングができなくてもワークフローを自動化したい人**、**計画を立てるのが好きな人**にも最適です。

---

## クイックスタート

### 1. Dockerをインストール

まだDockerをお持ちでない場合は、先にインストールしてください：

| OS | ダウンロードリンク |
|---------|---------|
| Windows | [Docker Desktop for Windows](https://www.docker.com/products/docker-desktop/) |
| Mac | [Docker Desktop for Mac](https://www.docker.com/products/docker-desktop/) |
| Linux | [Docker Engine](https://docs.docker.com/engine/install/) |

### 2. N3Nを起動

ターミナルを開いて、以下のコマンドを実行してください：

```bash
# プロジェクトをクローン
git clone https://github.com/aiinpocket/n3n.git
cd n3n

# サービスを起動（初回は数分かかる場合があります）
docker compose up -d
```

> **ゼロ設定で起動**：N3Nはすぐに使えるよう設計されています：
> - PostgreSQL / Redisは自動的に起動・接続されます
> - JWT秘密鍵は初回起動時に自動生成されます
> - 環境変数の設定は不要です

### 3. 使い始める

ブラウザを開いて、次のアドレスにアクセス：**http://localhost:8080**

初回セットアップでは以下をガイドします：
1. 管理者アカウントの作成
2. AIアシスタントの設定（お持ちのAIサービスを選択）
3. 最初のワークフローを作成！

---

## AIアシスタントの設定

N3Nは複数のAIサービスをサポートしています。お好みのものを選べます：

| AIサービス | 説明 | 申請リンク |
|--------|------|---------|
| **Claude** | AnthropicのAI、分析と推論に優れる | [APIキーを取得](https://console.anthropic.com/) |
| **ChatGPT** | OpenAIのAI、幅広い知識とコーディング能力 | [APIキーを取得](https://platform.openai.com/api-keys) |
| **Gemini** | GoogleのAI、マルチモーダル対応 | [APIキーを取得](https://aistudio.google.com/apikey) |
| **Ollama** | ローカル実行、無料でプライベート | [Ollamaをダウンロード](https://ollama.com/download) |

> **ヒント**：有料サービスを使いたくない場合は、Ollamaを選んで自分のPCでAIを実行できます。完全無料！

---

## よくある質問

### 起動に失敗した場合は？

Dockerが実行中であることを確認してから、再試行してください：
```bash
docker compose down
docker compose up -d
```

### サービスを停止するには？

```bash
docker compose down
```

### 最新バージョンに更新するには？

```bash
git pull
docker compose down
docker compose up -d --build
```

---

## 機能特徴

- **AIワークフロー生成** - 自然言語で説明すれば、AIがワークフローを作成
- **ビジュアルエディター** - ドラッグ＆ドロップで直感的に調整
- **エラーハンドリングルート** - 正常フローとエラー処理パスを視覚的に区別（緑/赤/青の接続線）
- **リアルタイム監視** - ワークフロー実行の各ステップをリアルタイムで確認
- **Webhookトリガー** - 外部システム（GitHub、Slackなど）からワークフローを自動起動
- **58+の公式テンプレート** - スケジュール、通知、データ処理、AI、監視、承認、統合、Webスクレイピングなど
- **スキルシステム** - 内蔵の自動化スキル、追加設定不要
- **安全なストレージ** - APIキーとパスワードはAES-256で暗号化して保存
- **カスタムDockerツール** - Docker Hubからツールコンテナをプル、フローノードとして自動登録
- **デバイス管理** - ローカルエージェントを接続して、ワークフローからPCを制御

### エラーハンドリングルート

N3Nは3種類の接続タイプをサポートし、正常フローとエラー処理を明確に区別します：

| 接続タイプ | 色 | 説明 |
|-----------|-----|------|
| **成功パス** | 緑 | ノード実行成功後のルート |
| **エラーパス** | 赤（破線） | ノード実行失敗時のルート |
| **常時実行** | 青 | 成功・失敗に関わらず実行 |

フローエディターで接続線をクリックしてタイプを設定できます。

---

## カスタムDockerツール

N3NではDocker Hubからツールコンテナをプルし、利用可能なフローノードとして自動登録できます：

### 使い方

1. 「カスタムDockerツール」ページにアクセス
2. Docker Hubのイメージ名を入力（例：`n3n/tool-slack`）
3. 「プル」をクリック — システムが自動でダウンロードして登録
4. 対応する認証情報（APIキーなど）を設定
5. フローエディターで新しいノードとして利用可能に

---

## ローカルエージェント

ワークフローからPCを制御したい場合、ローカルエージェントをインストールしてください：

### エージェントのダウンロード

| OS | ダウンロード | 説明 |
|---------|---------|------|
| Windows | [GitHub Release](https://github.com/aiinpocket/n3n/releases) | .NET 8 自己完結型実行ファイル |
| macOS | [GitHub Release](https://github.com/aiinpocket/n3n/releases) | Swiftアプリケーション（Apple Silicon） |

### エージェント機能

- **ファイル操作** - ファイルの読み取り、書き込み、コピー、移動
- **クリップボード** - クリップボード内容の読み取りと設定
- **デスクトップ通知** - システム通知の表示
- **アプリケーション起動** - ローカルアプリケーションの起動
- **スクリーンショット** - 画面キャプチャ

### ペアリング手順

1. N3Nのウェブインターフェースで「デバイス管理」に移動
2. 「デバイスを追加」をクリックして6桁のペアリングコードを取得
3. エージェントにペアリングコードを入力
4. ペアリング完了後、フローでローカルノードが利用可能に

### セキュリティ

- **X25519 ECDH** - エンドツーエンド暗号化鍵交換
- **AES-256-GCM** - すべてのコマンドを暗号化して送信
- **ペアリングコード認証** - 自分だけがデバイスをペアリングできることを保証
- **認証情報の安全な保存** - WindowsはCredential Manager、macOSはKeychainを使用

---

## 環境変数（オプション）

N3Nは**ゼロ設定設計**を採用しており、すべての設定にはデフォルト値があります。以下の環境変数は特別な要件がある場合のみ設定してください：

### データベース接続（外部データベース）

| 変数 | デフォルト値 | 説明 |
|------|-----------|------|
| `DATABASE_URL` | `jdbc:postgresql://localhost:5432/n3n` | PostgreSQL接続文字列 |
| `DATABASE_USERNAME` | `n3n` | データベースユーザー名 |
| `DATABASE_PASSWORD` | `n3n` | データベースパスワード |
| `REDIS_HOST` | `localhost` | Redisホスト |
| `REDIS_PORT` | `6379` | Redisポート |

### セキュリティ

| 変数 | デフォルト値 | 説明 |
|------|-----------|------|
| `JWT_SECRET` | 自動生成 | JWT署名鍵（クラスターデプロイ時に統一設定が必要） |
| `ALLOWED_ORIGINS` | `http://localhost:3000,http://localhost:8080` | CORS許可オリジン |

### コンテナオーケストレーション（プラグインシステム）

| 変数 | デフォルト値 | 説明 |
|------|-----------|------|
| `ORCHESTRATOR_TYPE` | `docker` | コンテナエンジン（`docker` / `kubernetes` / `auto`） |
| `K8S_NAMESPACE` | `n3n` | Kubernetesメイン名前空間 |
| `K8S_PLUGIN_NAMESPACE` | `n3n-plugins` | Kubernetesプラグイン名前空間 |
| `K8S_SERVICE_ACCOUNT` | `n3n-plugin-manager` | Kubernetesサービスアカウント |

> **autoモード**：起動時にシステムが環境を自動検出（K8s Service Account → Docker Socket → Docker CLI）し、適切なコンテナエンジンを選択します。

### AIフローオプティマイザー（デフォルト有効）

| 変数 | デフォルト値 | 説明 |
|------|-----------|------|
| `FLOW_OPTIMIZER_ENABLED` | `true` | ローカルAIオプティマイザー（デフォルト有効） |
| `FLOW_OPTIMIZER_URL` | `http://flow-optimizer:8081` | オプティマイザーサービスURL |

ローカルAIオプティマイザーは `docker compose up -d` で自動的に起動し、追加設定やAPIキーは不要です。

> **注意**：ローカルAIオプティマイザーはマシン上で実行されます。初回起動時にモデルのダウンロード（約2.3GB）が必要で、最低4GBのメモリが必要です。

---

## 詳細情報

開発者で技術的な詳細を知りたい場合は、[TECHNICAL.md](TECHNICAL.md)をご覧ください。

---

## ライセンス

Apache License 2.0 - [LICENSE](LICENSE)を参照
